# Railway configuration for EmPulse Music
# Dual-deploy: Railway (DB/API) + Vercel (Frontend)

[build]
builder = "nixpacks"
command = "prisma generate && npm run build"

[deploy]
startCommand = "npm start"
healthcheckPath = "/api/health"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

# Environment variables
# DATABASE_URL will be auto-set from PostgreSQL service
# PORT is automatically set by Railway (default: 3000)

[environments.production]
NODE_ENV = "production"

[environments.staging]
NODE_ENV = "staging"
