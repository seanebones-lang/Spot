echo "ğŸš€ Running pre-push checks..."

# Run security scan
echo "ğŸ”’ Running security scan..."
node tools/security-mcp.js npm scan || {
  echo "âš ï¸  Security scan found issues, but continuing..."
}

# Run full test suite
echo "ğŸ§ª Running full test suite..."
npm test || {
  echo "âŒ Tests failed. Push aborted."
  exit 1
}

# Optional: Run e2e tests (can be slow)
# echo "ğŸ§ª Running e2e tests..."
# npm run test:e2e || {
#   echo "âš ï¸  E2E tests failed, but continuing..."
# }

echo "âœ… Pre-push checks passed!"
